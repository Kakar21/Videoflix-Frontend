<main>
  <form (ngSubmit)="login()" [formGroup]="loginForm">
    <h1>Log In</h1>

    <mat-form-field class="email-field">
      <input type="email" matInput formControlName="email" placeholder="Email Address">
      <mat-error *ngIf="loginForm.get('email')?.hasError('email') && !loginForm.get('email')?.hasError('required')">
        Please enter a valid email address
      </mat-error>
      <mat-error *ngIf="loginForm.get('email')?.hasError('required')">
        Email is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <mat-form-field class="password-field">
      <input matInput [type]="hide() ? 'password' : 'text'" formControlName="password" placeholder="Password">
      <button type="button" mat-icon-button matSuffix (click)="clickEvent($event)" [attr.aria-label]="'Hide password'"
        [attr.aria-pressed]="hide()">
        <img [src]="hide() ? 'assets/icons/visibility_off.svg' : 'assets/icons/visibility.svg'"
          alt="Toggle password visibility">
      </button>
      <mat-error *ngIf="loginForm.get('password')?.hasError('required')">
        Password is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <div *ngIf="errorMessage" class="error">
      <img src="assets/icons/warning.svg" alt="">
      {{ errorMessage }}
    </div>

    <div class="links-buttons">
      <div>
        <button type="submit" mat-flat-button class="filled" [disabled]="loginForm.invalid">Log In</button>
        <button type="button" mat-stroked-button class="outline" (click)="guestLogin()">Guest Log In</button>
      </div>
      <a href="/forgot-password">Forgot password?</a>
      <div>
        <span>New to Videoflix?</span>
        <a href="/signup">Sign Up now</a>
      </div>
    </div>
  </form>
</main>